<div class="sponsor-card mb-4 mx-auto light-dark-card" id="sponsor_slider" style="display: none;">
    <div class="bb mx-3 mt-3 pb-3 d-flex justify-content-between" style="gap: 6px;">
    <h3 class="sponsor-card-title">
        <svg width="15" height="20" viewBox="0 0 15 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M6.78884 0.213853C7.21839 -0.0712843 7.7807 -0.0712843 8.21025 0.213853L8.90533 0.670854C9.13963 0.823188 9.41298 0.897401 9.69023 0.881777L10.522 0.830999C11.0374 0.799752 11.5217 1.08098 11.752 1.54189L12.1269 2.28793C12.2519 2.53792 12.4549 2.73712 12.701 2.86211L13.4546 3.241C13.9154 3.47145 14.1966 3.95579 14.1653 4.47138L14.1145 5.30336C14.0989 5.58068 14.1731 5.85801 14.3254 6.08846L14.7862 6.78373C15.0713 7.21339 15.0713 7.77585 14.7862 8.20551L14.3254 8.90468C14.1731 9.13904 14.0989 9.41246 14.1145 9.68979L14.1653 10.5218C14.1966 11.0374 13.9154 11.5217 13.4546 11.7521L12.7088 12.1271C12.4588 12.2521 12.2597 12.4552 12.1347 12.7013L11.756 13.4552C11.5256 13.9161 11.0413 14.1973 10.5259 14.1661L9.69413 14.1153C9.41688 14.0996 9.13963 14.1739 8.90924 14.3262L8.21415 14.7871C7.78461 15.0722 7.22229 15.0722 6.79275 14.7871L6.09376 14.3262C5.85946 14.1739 5.58611 14.0996 5.30886 14.1153L4.47711 14.1661C3.96165 14.1973 3.47744 13.9161 3.24704 13.4552L2.87217 12.7091C2.74721 12.4591 2.54415 12.2599 2.29814 12.1349L1.54448 11.7561C1.08369 11.5256 0.802537 11.0413 0.833776 10.5257L0.884541 9.69369C0.900161 9.41637 0.825967 9.13904 0.673673 8.90859L0.216793 8.20942C-0.0682695 7.77976 -0.0682695 7.21729 0.216793 6.78764L0.673673 6.09237C0.825967 5.85801 0.900161 5.58459 0.884541 5.30726L0.833776 4.47529C0.802537 3.9597 1.08369 3.47535 1.54448 3.2449L2.29033 2.86993C2.54024 2.74103 2.7433 2.53792 2.86826 2.28793L3.24314 1.54189C3.47353 1.08098 3.95775 0.799752 4.4732 0.830999L5.30496 0.881777C5.58221 0.897401 5.85946 0.823188 6.08985 0.670854L6.78884 0.213853ZM10.6235 7.49853C10.6235 6.66978 10.2944 5.87498 9.70852 5.28896C9.12267 4.70295 8.32807 4.37373 7.49955 4.37373C6.67102 4.37373 5.87642 4.70295 5.29057 5.28896C4.70471 5.87498 4.37558 6.66978 4.37558 7.49853C4.37558 8.32727 4.70471 9.12207 5.29057 9.70809C5.87642 10.2941 6.67102 10.6233 7.49955 10.6233C8.32807 10.6233 9.12267 10.2941 9.70852 9.70809C10.2944 9.12207 10.6235 8.32727 10.6235 7.49853ZM0.0527843 17.2557L1.73582 13.252C1.74363 13.256 1.74754 13.2599 1.75144 13.2677L2.12632 14.0137C2.5832 14.9199 3.5321 15.4707 4.54739 15.4121L5.37915 15.3613C5.38696 15.3613 5.39868 15.3613 5.40649 15.3691L6.10157 15.83C6.30072 15.9589 6.51159 16.0605 6.73027 16.1308L5.262 19.6188C5.17219 19.8336 4.97304 19.9782 4.74264 19.9977C4.51225 20.0172 4.28967 19.9118 4.16471 19.7165L2.90731 17.7908L0.716628 18.115C0.494045 18.1463 0.271462 18.0564 0.130884 17.8806C-0.00969507 17.7049 -0.0370298 17.4627 0.0488793 17.2557H0.0527843ZM9.73709 19.6149L8.26882 16.1308C8.4875 16.0605 8.69837 15.9628 8.89752 15.83L9.5926 15.3691C9.60041 15.3652 9.60822 15.3613 9.61994 15.3613L10.4517 15.4121C11.467 15.4707 12.4159 14.9199 12.8728 14.0137L13.2476 13.2677C13.2516 13.2599 13.2555 13.256 13.2633 13.252L14.9502 17.2557C15.0361 17.4627 15.0049 17.701 14.8682 17.8806C14.7315 18.0603 14.505 18.1502 14.2825 18.115L12.0918 17.7908L10.8344 19.7126C10.7094 19.9079 10.4868 20.0133 10.2564 19.9938C10.0261 19.9743 9.8269 19.8258 9.73709 19.6149Z" fill="#2A4E96"/>
        </svg>
        <span>Sponsors</span>
    </h3>

    </div>
    <div class="sponsor-content-carousel" id="sponsor_content_carousel"></div>

</div>


<script>

var s_eventtoken = '<?php echo $eventtoken; ?>';
const eventSponsorInfoKey =  `event_MetaInfo_${s_eventtoken}`;

IntaoDB.getItem(objStores.event_store.name, eventSponsorInfoKey).then((data) => {
    //console.log('---eventSponsoreventSponsor-------',data)
    if (data?.values) {
        buildSponsorCarousel(s_eventtoken, data.values);
    }
});

function buildSponsorCarousel(s_eventtoken,response){
        let sponsor_data =response.output;
        //let eventSponsor = sponsor_data.event_sponsor ? groupByArrayVal(sponsor_data.event_sponsor, 'sponsor_type') : {};
        let eventSponsor = sponsor_data.event_sponsor ?  sponsor_data.event_sponsor : {};
        //let eventSponsor = {};
        let eventExhibitor = sponsor_data.event_exhibitor ?  sponsor_data.event_exhibitor : {};
        //let eventExhibitor = {};
        const hasSponsors = Object.keys(eventSponsor).length > 0;
        const hasExhibitor = Object.keys(eventExhibitor).length > 0;
        var sponsorsToken = [];
        if (hasSponsors || hasExhibitor) {

            let sponsorContentCarouselHtml = '';
            sponsorContentCarouselHtml += `
                            <div id="fullWidget" class="sponsorcarousel slide p-3 mt-2" data-ride="carousel" data-bs-ride="carousel" >
                                <div class="carousel-inner">
                                ${hasSponsors ? eventSponsor.map((sponsor, key) => `
                                        <div class="carousel-item ${key === 0 ? 'active' : ''}">
                                            ${sponsor.link ? `<a href="${sponsor.link}">` : ''}
                                                <div class="full-image-container">
                                                    <div class="events-bg" style="background-image: url(${sponsor.image})"></div>
                                                    <div class="glass-overlay"></div>
                                                    <img class="d-block w-100 full-image" src="${sponsor.image}" title="${sponsor.title}">
                                                </div>
                                            ${sponsor.link ? '</a>' : ''}
                                            <div class="pt-2">
                                                ${sponsor.link ? `<a target="_blank" href="${sponsor.link}">
                                                <h3 class="sponsor-name">${sponsor.title}</h3></a>` : `<h3 class="sponsor-name">${sponsor.title}</h3>`}
                                                <p class="event-org-desc">${sponsor.description}</p>
                                            </div>
                                        </div>
                                    `).join('') : ''}

                                    ${hasExhibitor ? eventExhibitor.map((exhibitor, ekey) => `
                                        <div class="carousel-item ${(!hasSponsors  && ekey === 0) ? 'active' : ''}">
                                            ${exhibitor.link ? `<a href="${exhibitor.link}">` : ''}
                                                <div class="full-image-container">
                                                    <div class="events-bg" style="background-image: url(${exhibitor.exh_logo})"></div>
                                                    <div class="glass-overlay"></div>
                                                    <img class="d-block w-100 full-image" src="${exhibitor.exh_logo}" title="${exhibitor.exh_subtitle}">
                                                </div>
                                            ${exhibitor.exh_hero_button_url ? '</a>' : ''}
                                            <div class="pt-2">
                                                ${exhibitor.exh_hero_button_url 
                                                    ? `<a target="_blank" href="${exhibitor.exh_hero_button_url}"><h3 class="sponsor-name">${exhibitor.exh_subtitle}</h3></a>` 
                                                    : `<h3 class="sponsor-name">${exhibitor.exh_subtitle}</h3>`}
                                                <p class="event-org-desc">${exhibitor.exh_description}</p>
                                            </div>
                                        </div>
                                    `).join('') : ''}
                                </div>
                            </div>
                        `;
            $('#sponsor_content_carousel').html(sponsorContentCarouselHtml);
            $('#sponsor_slider').show();
            $('.sponsorcarousel').carousel({
                interval: 2000
            });

        }
}
</script>
